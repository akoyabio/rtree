"0","## Load packages"
"0","library(sp)"
"0","library(rgeos)"
"0","library(rbenchmark)"
"0","## Simulate data"
"0","set.seed(0)"
"0","A_n <- 10^3"
"0","A <- cbind(runif(A_n), runif(A_n))"
"0","B_n <- 10^3"
"0","B <- cbind(runif(B_n), runif(B_n))"
"0","d <- 0.05"
"0","## Encapsulate wd operations in functions, then benchmark"
"0","rgeos.wd <- function() {"
"0","  wd_mat <- gWithinDistance(spgeom1=SpatialPoints(A), spgeom2=SpatialPoints(B), dist=d, byid=TRUE)"
"0","}"
"0","rtree.wd <- function() {"
"0","  wd_ls <- withinDistance(RTree(B), A, d)"
"0","}"
"0","bm.wd <- benchmark(rtree=rtree.wd(),"
"0","                   rgeos=rgeos.wd(),"
"0","                   replications=10,"
"0","                   columns=c(""test"", ""replications"", ""elapsed"", ""relative""))"
"0","## Print output"
"0","print(bm.wd)"
